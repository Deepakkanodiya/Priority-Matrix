<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Priority Matrix - Dear Deepak</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-200 via-purple-100 to-pink-200 text-gray-900">
  <div class="max-w-5xl mx-auto p-4">
    <div class="text-center mb-6">
      <h1 class="text-3xl font-bold mb-2">üåü Dear Deepak, Focus Builds the Future</h1>
      <p class="text-lg italic">‚ÄúYou will never always be motivated, so you must learn to be disciplined.‚Äù</p>
      <p class="mt-2 text-sm">üß† Task Management Tip: Break your tasks into categories and give them meaning, not just urgency.</p>
    </div>

    <div class="bg-white shadow-lg rounded-xl p-6 mb-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <input id="taskTitle" class="p-2 border rounded" placeholder="Task Title" />
        <select id="taskCategory" class="p-2 border rounded">
          <option>NDPS</option>
          <option>Business</option>
          <option>Family</option>
          <option>Personnel</option>
          <option>Habit</option>
          <option>Appointment</option>
          <option>Mindfresh</option>
          <option>Other</option>
        </select>
        <input id="taskDate" type="date" class="p-2 border rounded" />
        
        <input id="importance" type="number" min="0" max="10" class="p-2 border rounded" placeholder="Importance (1-10)" />
        <input id="relation" type="number" min="0" max="10" class="p-2 border rounded" placeholder="Relation (1-10)" />
        <input id="urgency" type="number" min="0" max="10" class="p-2 border rounded" placeholder="Urgency (1-10)" />
        <input id="compulsion" type="number" min="0" max="10" class="p-2 border rounded" placeholder="Compulsion (1-10)" />
      </div>
      <button onclick="addTask()" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Add Task</button>
    </div>

    <div class="flex justify-between mb-4">
      <select id="categoryFilter" class="p-2 border rounded" onchange="renderTasks()">
        <option value="">All Categories</option>
        <option>NDPS</option>
        <option>Business</option>
        <option>Family</option>
        <option>Personnel</option>
        <option>Habit</option>
        <option>Appointment</option>
        <option>Mindfresh</option>
        <option>Other</option>
      </select>
      <div>
        <button onclick="exportToExcel()" class="px-4 py-2 bg-green-500 text-white rounded">Export Excel</button>
        <button onclick="exportToPDF()" class="px-4 py-2 bg-red-500 text-white rounded ml-2">Export PDF</button>
      </div>
    </div>

    <div id="taskList" class="space-y-4"></div>
  </div>

  <script>
    let tasks = JSON.parse(localStorage.getItem("priorityTasks")) || [];

    function calculateScore(task) {
      return +task.importance + +task.relation + +task.urgency + +task.compulsion;
    }

    function addTask() {
      const task = {
        title: document.getElementById("taskTitle").value,
        category: document.getElementById("taskCategory").value,
        date: document.getElementById("taskDate").value,
        importance: +document.getElementById("importance").value,
        relation: +document.getElementById("relation").value,
        urgency: +document.getElementById("urgency").value,
        compulsion: +document.getElementById("compulsion").value,
        id: Date.now()
      };
      tasks.push(task);
      localStorage.setItem("priorityTasks", JSON.stringify(tasks));
      renderTasks();
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      localStorage.setItem("priorityTasks", JSON.stringify(tasks));
      renderTasks();
    }

    function editTask(id) {
      const t = tasks.find(t => t.id === id);
      document.getElementById("taskTitle").value = t.title;
      document.getElementById("taskCategory").value = t.category;
      document.getElementById("taskDate").value = t.date;
      document.getElementById("importance").value = t.importance;
      document.getElementById("relation").value = t.relation;
      document.getElementById("urgency").value = t.urgency;
      document.getElementById("compulsion").value = t.compulsion;
      deleteTask(id);
    }

    function renderTasks() {
      const container = document.getElementById("taskList");
      container.innerHTML = "";
      const filter = document.getElementById("categoryFilter").value;
      const sorted = [...tasks]
        .filter(t => !filter || t.category === filter)
        .sort((a, b) => calculateScore(b) - calculateScore(a));

      for (const t of sorted) {
        const d = new Date(t.date);
        const readableDate = d.toDateString();
        container.innerHTML += `
          <div class="p-4 bg-white shadow rounded-xl">
            <div class="flex justify-between items-center">
              <div>
                <h3 class="text-xl font-bold">${t.title}</h3>
                <p class="text-sm text-gray-600">${t.category} | Due: ${readableDate}</p>
                <p class="text-xs">Priority Score: ${calculateScore(t)}</p>
              </div>
              <div class="space-x-2">
                <button onclick="editTask(${t.id})" class="px-2 py-1 text-sm bg-yellow-400 rounded">Edit</button>
                <button onclick="deleteTask(${t.id})" class="px-2 py-1 text-sm bg-red-500 text-white rounded">Delete</button>
              </div>
            </div>
          </div>
        `;
      }
    }

    function exportToExcel() {
      const worksheet = XLSX.utils.json_to_sheet(tasks);
      const workbook = XLSX.utils.book_new();
      XLSX.utils.book_append_sheet(workbook, worksheet, "Tasks");
      XLSX.writeFile(workbook, "PriorityTasks.xlsx");
    }

    function exportToPDF() {
      window.print();
    }

    renderTasks();
  </script>
</body>
</html>
